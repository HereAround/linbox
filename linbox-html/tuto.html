<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linbox: LinBox tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linbox
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">LinBox Symbolic Linear Algebra Software Library.</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The person requiring some exact linear algebra computation may exploit <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> at any of four general levels.</p>
<p>In order from least involved with the details to most involved, they are:</p>
<ol>
<li>
<p class="startli">Access using a <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> web server. </p>
<p>The user at this level must attend to preparation of a matrix in a suitable file format and invoking the webservice. The server itself should provide adequate documentation for this. Servers are generally available at <a href="http://www.linalg.org" target="_blank">linalg.org</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Access using compiled codes. Full programs exist in the examples directory and can be used through an interface to <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> in a general purposes system such as Maple or <a href="http://www.sagemath.org" target="_blank">SAGE</a>. </p>
<p>The user at this level must see to installation, and then attend to preparation of her matrix in a suitable file format and to the form of the program or procedure invocation. A number of programs are available in the examples directory distributed with <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> providing for rank, determinant, linear system solution, etc. The documentation of the examples module should serve for this level of access.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Use of <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> as a programmers library for exact linear algebra functions. </p>
<p>At this level a user must do at least the following: </p><ol type="a">
<li>
Choose a field or ring representation and construct a specific field or ring object <code>R</code>.  </li>
<li>
Choose a blackbox or matrix representation suitable to your data and construct specific matrix <code>A</code> over <code>R</code>.  </li>
<li>
Call the desired algorithm. The solutions directory is designed to support this by providing functions with simple problem oriented interfaces (<code><a class="el" href="group__solutions.html#gaf81b9dc67cedf2044133b59399dd2334" title="Compute the rank of a linear transform A over a field by selected method. ">rank()</a></code>, <code><a class="el" href="group__solutions.html#ga017678ad2851590ad3335371136f1730" title="Compute the determinant of A. ">det()</a></code>, <code>solve()</code>), yet allowing some user control of algorithm details. The programmer may be providing some of the parts such as an application specific blackbox matrix class.  </li>
</ol>
<p class="endli"></p>
</li>
<li>
<p class="startli">Power development. </p>
<p>Again, this is use of <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> as a library, but with hands fully on the details. The programmer at this level apparently needs the best opportunities for high performance and is willing to use the more complicated internal interfaces to get it. Direct calls to functions in the algorithms directory and perhaps to related packages such as <code>FFLAS</code>, <code>FFPACK</code>, or other components are being used. The programmer working at this level of intimacy with <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> is likely to develop some components that ought to be included in future releases of <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a>. Such contributions are warmly welcomed. The online documentation system is intended primarily for the programmer at level 3. Thus documentation is not generated to the last internal detail. It is supposed that the level 4 (and 3) programmer, when studying internal details, will be best served by reading the code. It is possible, if you wish, to set <a href="http://www.doxygen.org/" target="_blank">doxygen</a> parameters so as to have a documentation listing for every class and function. Good luck separating wheat from chaff in that case.</p>
<p class="endli"></p>
</li>
</ol>
<p>In this tutorial we will discuss a simple application at level 3, the design of a program to compute the determinant of a sparse matrix over <img class="formulaInl" alt="$\mathbf{GF}(101)$" src="form_68.png"/>. The programmer has 3 major issues: field, matrix, algorithm.</p>
<p>The basic algorithm choice is between blackbox and elimination algorithms. If our matrix is <code>A</code>, then the algorithm call may look like </p><div class="fragment"><div class="line"><a class="code" href="group__solutions.html#ga017678ad2851590ad3335371136f1730">det</a>(d, A, Method::Blackbox());</div><div class="line"><span class="comment">//or</span></div><div class="line"><a class="code" href="group__solutions.html#ga017678ad2851590ad3335371136f1730">det</a>(d, A, Method::Elimination());</div></div><!-- fragment --><p> To have access to this determinant function just <code>#include &lt;<a class="el" href="det_8h.html" title="NO DOC. ">linbox/solutions/det.h</a>&gt;</code>.</p>
<p>The larger and sparser the matrix the more likely that the blackbox algorithm is fastest. Hybrids are under development to help make this choice, and even to make it at run time adaptively. The last argument to the solutions functions is a method object which specifies the algorithm to be used. In each case there is a default, so this argument is optional. Also, some method objects may be constructed so as to convey more detail about the algorithm to use. For example it may help to promise that the matrix is nonsingular or symmetric or to request a particular algorithm variant. The blackbox algorithm based fundamentally on Wiedemann's approach is specified by <code>Method::Wiedemann</code>, see <code>solutions/methods.h</code> for more details. Specification of a blocked blackbox algorithm may be advantageous (in the future). Elimination is likely fastest if the matrix is not extremely sparse or not large or not subject to rapid fill-in.</p>
<p>Of course, first we must construct the matrix and field. For the field, you must first choose the class (representation type) of field and then instantiate your specific field.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;givaro/modular.h&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> Givaro::Modular&lt;short&gt; Field;</div><div class="line">Field F(101);</div></div><!-- fragment --><p>It is a good idea to use a <code>typedef</code>, making it easy to change representations later. The modular field representations are <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a>'s own and contain some useful optimizations. Another possibility is use of <a href="http://shoup.net/ntl/" target="_blank">NTL</a>'s <code>NTL::ZZ_p</code> class. The <a class="el" href="namespace_lin_box.html" title="Namespace in which all linbox code resides. ">LinBox</a> wrapper of that, called <code><a class="el" href="struct_lin_box_1_1_n_t_l___z_z__p.html" title="Wrapper of zz_p from NTL. ">LinBox::NTL_ZZ_p</a></code> is found in <code>field/ntl-ZZ_p.h</code>. Or use a <a href="http://ljk.imag.fr/CASYS/LOGICIELS/givaro/" target="_blank">Givaro</a> table based representation, <code>LinBox::Givaro::GFq</code> in <code>field/givaro-gfq.h</code> ...and there are many other options. The program <code>tests/test-fields.C</code> will provide some timing data on the basic functions of each representation. In LinBox, a <code>Field</code> class and the class representing the field entries are distinct types. The field object owns the arithmetic operations, whereas the entry objects may be of a primitive type such as <code>short</code>, <code>int</code>, <code>double</code>. Each field class <code>Fld</code> has the embedded class <code>Fld::Element</code> for it's elements.</p>
<div class="fragment"><div class="line">Field::Element a, b, c;</div><div class="line">F.init(a, 2); F.init(b, 3);</div><div class="line">F.mul(c, a, b); <span class="comment">// c &lt;- a*b</span></div><div class="line">F.write(cout, c);</div></div><!-- fragment --><p>You have seen that the field representations are in subdirectory <code>linbox/field</code>. Similarly the matrix representations are in <code>linbox/blackbox</code>. All of these are are suitable for blackbox algorithms. Only those deriving from representations in <code>linbox/matrix</code> are suitable for elimination. For a sparse matrix, <code>LinBox::TriplesBB</code> is a good representation choice if a blackbox algorithm is to be used. For a <img class="formulaInl" alt="$\{0,1\}-$" src="form_69.png"/>incidence matrix, the class <code><a class="el" href="class_lin_box_1_1_zero_one.html" title="Time and space efficient representation of sparse {0,1}-matrices. ">LinBox::ZeroOne</a></code> will be more economical of space and time. On the other hand, if elimination is to be used, those will not serve at all, but <code>LinBox::SparseMatrix</code>, which allows internal modification, will do the trick. The ordinary matrix representation is <code><a class="el" href="class_lin_box_1_1_blas_matrix.html" title="Dense matrix representation. ">LinBox::BlasMatrix</a></code>. If your matrix structure allows you to compute matrix-vector products in a way faster than these classes provide, you can gain by defining your own matrix class adhering to the <a class="el" href="group__blackbox.html">blackbox</a> interface. The main components of the blackbox interface are member functions <code>apply()</code> and <code>applyTranspose()</code> functions. <code>A.apply(y, x)</code> performs <img class="formulaInl" alt="$y \gets Ax$" src="form_66.png"/>.</p>
<p>Then there is the question of initializing matrix entries. Two basic approaches are illustrated here.</p>
<div class="fragment"><div class="line">TriplesBB A;</div><div class="line">A.read(<span class="stringliteral">&quot;triples-file&quot;</span>); <span class="comment">// initialize A from data in file (including shape).</span></div></div><!-- fragment --><p>Or a program can add entries to a sparse or dense matrix one by one using the <code>setEntry</code> function.</p>
<div class="fragment"><div class="line">SparseMatrix B(100, 200); <span class="comment">// 100 by 200 zero matrix (so far).</span></div><div class="line"><span class="keywordflow">for</span> ( ... )</div><div class="line">{</div><div class="line">   Field::Element v;</div><div class="line">   F.init(v, ...);</div><div class="line">   B.setEntry(i, j, v);  <span class="comment">// put nonzero v in i,j position.</span></div><div class="line">}</div></div><!-- fragment --><p>Putting it all together, we may have a program looking like this. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;givaro/modular.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dense-matrix_8h.html">linbox/matrix/dense-matrix.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="det_8h.html">linbox/solutions/det.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_lin_box.html">LinBox</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="keyword">typedef</span> Givaro::Modular&lt;double&gt; Field;</div><div class="line">    Field F(101);</div><div class="line"></div><div class="line">    SparseMatrix&lt;Field&gt; A(F); </div><div class="line">    A.read(std::cin);</div><div class="line"></div><div class="line">    Field::Element d;</div><div class="line">    Method::BlasElimination M;</div><div class="line"></div><div class="line">    <a class="code" href="group__solutions.html#ga017678ad2851590ad3335371136f1730">det</a>(d, A, M);</div><div class="line"></div><div class="line">    F.write(std::cout &lt;&lt; <span class="stringliteral">&quot;the determinant is &quot;</span>, d) &lt;&lt; std::endl;</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>A possible format for the input matrix is that of <a href="http://hpac.imag.fr">hpac.imag.fr</a>.</p>
<p>This tutorial should continue with a discussion of compilation issues, but it doesn't. Something useful may be learned from examining the Makefile.am in the examples directory. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 5 2019 14:05:43 for linbox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
